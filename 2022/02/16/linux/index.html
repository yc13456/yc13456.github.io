<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>linux | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="linux笔记查看服务1systemctl status 服务名  #配置CentOS7网络1234vi &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens33#这一项改为YES（ONBOOT&#x3D;yes）#重启网卡:sudo service network restart  123echo &quot;字符串&quot;：换行打印；echo -n &quot;字符串&amp;q">
<meta property="og:type" content="article">
<meta property="og:title" content="linux">
<meta property="og:url" content="http://example.com/2022/02/16/linux/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="linux笔记查看服务1systemctl status 服务名  #配置CentOS7网络1234vi &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens33#这一项改为YES（ONBOOT&#x3D;yes）#重启网卡:sudo service network restart  123echo &quot;字符串&quot;：换行打印；echo -n &quot;字符串&amp;q">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2022-02-16T04:53:55.000Z">
<meta property="article:modified_time" content="2022-02-16T04:55:55.169Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.0.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-linux" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/02/16/linux/" class="article-date">
  <time class="dt-published" datetime="2022-02-16T04:53:55.000Z" itemprop="datePublished">2022-02-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      linux
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="linux笔记"><a href="#linux笔记" class="headerlink" title="linux笔记"></a>linux笔记</h1><h3 id="查看服务"><a href="#查看服务" class="headerlink" title="查看服务"></a>查看服务</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status 服务名</span><br></pre></td></tr></table></figure>

<h3 id="配置CentOS7网络"><a href="#配置CentOS7网络" class="headerlink" title="#配置CentOS7网络"></a>#配置CentOS7网络</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sysconfig/network-scripts/ifcfg-ens33</span><br><span class="line">#这一项改为YES（ONBOOT=yes）</span><br><span class="line">#重启网卡:</span><br><span class="line">sudo service network restart</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;字符串&quot;：换行打印；</span><br><span class="line">echo -n &quot;字符串&quot; 不换行打印&#x27;;</span><br><span class="line">echo -e选项输出转义字符</span><br></pre></td></tr></table></figure>

<h3 id="nc测试网路请求"><a href="#nc测试网路请求" class="headerlink" title="#nc测试网路请求"></a>#nc测试网路请求</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nc -lp 9999 #以本机作为服务端，监听9999端口</span><br><span class="line">nc 192.168.153.130 9999 #客户端机器使用netcat 和ip地址进行连接。</span><br></pre></td></tr></table></figure>

<h3 id="进程阻塞与非阻塞"><a href="#进程阻塞与非阻塞" class="headerlink" title="进程阻塞与非阻塞"></a>进程阻塞与非阻塞</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">同步阻塞：当A调用B的时候，A需要一直在等待，直到B返回结果，期间A不可以做任何事情。</span><br><span class="line">同步非阻塞：当A调用B的时候，A需要等待B返回结果，但是期间可以去做别的事情，但是A需要时不时的确认B是否返回结果。</span><br><span class="line">异步阻塞：当A调用B的时候，B立即返回结果，A不需要等待，到结果返回时B会通知A，但是期间A不可以做别的事情。</span><br><span class="line">异步非阻塞：当A调用B的时候，B立即返回结果，A不需要等待，到结果返回时B会通知A，而且期间A还可以做别的事情。</span><br></pre></td></tr></table></figure>

<h3 id="服务器内存使用情况：free"><a href="#服务器内存使用情况：free" class="headerlink" title="服务器内存使用情况：free"></a>服务器内存使用情况：free</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">free -m --查看内存，不带单位</span><br><span class="line">free -h --查看内存使用情况，带单位，显示查看结果</span><br><span class="line">total：总计物理内存的大小</span><br><span class="line">used：已使用内存</span><br><span class="line">free：可用内存</span><br><span class="line">Shared：多个进程共享的内存总额</span><br><span class="line">Buffers/cached：磁盘缓存的大小  缓存是可以清除的</span><br></pre></td></tr></table></figure>

<h3 id="缓存清除"><a href="#缓存清除" class="headerlink" title="缓存清除"></a>缓存清除</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">如果cached过大接近total数就需要清除缓存了，缓存清除命令：</span><br><span class="line">echo 1 &gt; /proc/sys/vm/drop_caches --释放网页缓存</span><br><span class="line">echo 2 &gt; /proc/sys/vm/drop_caches --释放目录项和索引</span><br><span class="line">echo 3 &gt; /proc/sys/vm/drop_caches --释放网页缓存，目录项和索引</span><br></pre></td></tr></table></figure>

<h3 id="本地和远程服务器文件传输包"><a href="#本地和远程服务器文件传输包" class="headerlink" title="本地和远程服务器文件传输包"></a>本地和远程服务器文件传输包</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt-get install lrzsz</span><br><span class="line">rz:上传</span><br><span class="line">sz:下载</span><br></pre></td></tr></table></figure>

<h3 id="统计ssh在线人数"><a href="#统计ssh在线人数" class="headerlink" title="统计ssh在线人数"></a>统计ssh在线人数</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">w	#显示目前登入系统的用户信息。</span><br><span class="line">w | grep pts |wc -l</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="查看系统中所有的用户"><a href="#查看系统中所有的用户" class="headerlink" title="查看系统中所有的用户"></a>查看系统中所有的用户</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep bash /etc/passwd</span><br></pre></td></tr></table></figure>

<h3 id="查看所有用户密码"><a href="#查看所有用户密码" class="headerlink" title="查看所有用户密码"></a>查看所有用户密码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/passwd</span><br><span class="line">#结果</span><br><span class="line">khadas:x:1000:1000::/home/khadas:/bin/bash</span><br><span class="line">从左到右依次为（用冒号分隔）：</span><br><span class="line">	登录用户名</span><br><span class="line">	经过加密的口令或者口令占位符</span><br><span class="line">	UID（用户ID）</span><br><span class="line">	默认的GID（组ID）</span><br><span class="line">	GECOS信息：全名，办公室，手机号，座机号，其它（上结果无该信息）</span><br><span class="line">	主目录</span><br><span class="line">	登录的shell</span><br></pre></td></tr></table></figure>

<h3 id="x2F-bin-x2F-bash-posix与-x2F-bin-x2F-sh区别"><a href="#x2F-bin-x2F-bash-posix与-x2F-bin-x2F-sh区别" class="headerlink" title="&#x2F;bin&#x2F;bash-posix与&#x2F;bin&#x2F;sh区别"></a>&#x2F;bin&#x2F;bash-posix与&#x2F;bin&#x2F;sh区别</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1./bin/bash–posix与/bin/sh的执行结果相同。总结起来，sh跟bash的区别，实际上是bash有没开启posix模式的区别。遵守posix规范，可能包括，”当某行代码出错时，不继续往下执行。“</span><br><span class="line">2.每个脚本开头都使用&quot;#!&quot;，它是指定一个文件类型的特殊标记，代表该文件就是一个可执行的脚本。在#!之后，接一个路径名，这个路径名指定了一个解释脚本命令的程序，这个程序可以是shell，程序语言或者任意一个通用程序。</span><br></pre></td></tr></table></figure>

<h3 id="分组操作"><a href="#分组操作" class="headerlink" title="分组操作"></a>分组操作</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="language-bash">添加分组</span></span><br><span class="line">groupadd -g id 组名</span><br><span class="line">参数说明：</span><br><span class="line">-g：指定新建工作组的 id；</span><br><span class="line">-r：创建系统工作组，系统工作组的组ID小于 500；</span><br><span class="line">-K：覆盖配置文件 &quot;/ect/login.defs&quot;；</span><br><span class="line">-o：允许添加组 ID 号不唯一的工作组。</span><br><span class="line">-f,--force: 如果指定的组已经存在，此选项将失明了仅以成功状态退出。当与 -g 一起使用，并且指定的GID_MIN已经存在时，选择另一个唯一的GID（即-g关闭）。</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">查看分组</span></span><br><span class="line">cat /etc/group</span><br><span class="line"><span class="meta">#</span><span class="language-bash">删除分组:</span></span><br><span class="line">sudo groupdel 组名</span><br></pre></td></tr></table></figure>

<h3 id="递归创建目录"><a href="#递归创建目录" class="headerlink" title="递归创建目录"></a>递归创建目录</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p</span><br><span class="line"><span class="meta">#</span><span class="language-bash">递归创建目录，即使上级目录不存在，会按目录层级自动创建目录。一次可以创建多级文件夹</span></span><br></pre></td></tr></table></figure>

<h3 id="添加用户到用户组"><a href="#添加用户到用户组" class="headerlink" title="添加用户到用户组"></a>添加用户到用户组</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd [-mMnr][-c &lt;备注&gt;][-d &lt;登入目录&gt;][-e &lt;有效期限&gt;][-f &lt;缓冲天数&gt;][-g &lt;群组&gt;][-G &lt;群组&gt;][-s &lt;shell&gt;][-u &lt;uid&gt;][用户帐号]</span><br></pre></td></tr></table></figure>

<h3 id="文本文件的语言–AWK"><a href="#文本文件的语言–AWK" class="headerlink" title="文本文件的语言–AWK"></a>文本文件的语言–AWK</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">awk [选项参数] &#x27;script&#x27; var=value file(s)</span><br><span class="line"><span class="meta">#</span><span class="language-bash">或</span></span><br><span class="line">awk [选项参数] -f scriptfile var=value file(s)</span><br><span class="line">选项参数:</span><br><span class="line">-F fs or --field-separator fs</span><br><span class="line">指定输入文件折分隔符，fs是一个字符串或者是一个正则表达式，如-F:。(默认空格分割，取值$1，$2依次取出第一和第二个分割后的元素)</span><br><span class="line">-v var=value or --asign var=value</span><br><span class="line">赋值一个用户定义变量。</span><br><span class="line">-f scripfile or --file scriptfile</span><br><span class="line">从脚本文件中读取awk命令。</span><br><span class="line">-mf nnn and -mr nnn</span><br><span class="line">对nnn值设置内在限制，-mf选项限制分配给nnn的最大块数目；-mr选项限制记录的最大数目。这两个功能是Bell实验室版awk的扩展功能，在标准awk中不适用。</span><br><span class="line">-W compact or --compat, -W traditional or --traditional</span><br><span class="line">在兼容模式下运行awk。所以gawk的行为和标准的awk完全一样，所有的awk扩展都被忽略。</span><br><span class="line">-W copyleft or --copyleft, -W copyright or --copyright</span><br><span class="line">打印简短的版权信息。</span><br><span class="line">-W help or --help, -W usage or --usage</span><br><span class="line">打印全部awk选项和每个选项的简短说明。</span><br><span class="line">-W lint or --lint</span><br><span class="line">打印不能向传统unix平台移植的结构的警告。</span><br><span class="line">-W lint-old or --lint-old</span><br><span class="line">打印关于不能向传统unix平台移植的结构的警告。</span><br><span class="line">-W posix</span><br><span class="line">打开兼容模式。但有以下限制，不识别：/x、函数关键字、func、换码序列以及当fs是一个空格时，将新行作为一个域分隔符；操作符**和**=不能代替^和^=；fflush无效。</span><br><span class="line">-W re-interval or --re-inerval</span><br><span class="line">允许间隔正则表达式的使用，参考(grep中的Posix字符类)，如括号表达式[[:alpha:]]。</span><br><span class="line">-W source program-text or --source program-text</span><br><span class="line">使用program-text作为源代码，可与-f命令混用。</span><br><span class="line">-W version or --version</span><br><span class="line">打印bug报告信息的版本。</span><br></pre></td></tr></table></figure>

<h3 id="xargs-工具"><a href="#xargs-工具" class="headerlink" title="xargs 工具"></a>xargs 工具</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="language-bash">xargs（英文全拼： eXtended ARGuments）是给命令传递参数的一个过滤器，也是组合多个命令的一个工具。</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">xargs 可以将管道或标准输入（stdin）数据转换成命令行参数，也能够从文件的输出中读取数据。</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">xargs 也可以将单行或多行文本输入转换为其他格式，例如多行变单行，单行变多行。</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">xargs 默认的命令是 <span class="built_in">echo</span>，这意味着通过管道传递给 xargs 的输入将会包含换行和空白，不过通过 <span class="comment">#xargs 的处理，换行和空白将被空格取代。</span></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">xargs 是一个强有力的命令，它能够捕获一个命令的输出，然后传递给另外一个命令。</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">之所以能用到这个命令，关键是由于很多命令不支持|管道来传递参数，而日常工作中有有这个必要，所以就有了 xargs 命令，例如：</span></span><br><span class="line">find /sbin -perm +700 |ls -l       #这个命令是错误的</span><br><span class="line">find /sbin -perm +700 |xargs ls -l   #这样才是正确的</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">命令格式</span></span><br><span class="line">somecommand |xargs -item  command</span><br><span class="line">-a file 从文件中读入作为 stdin</span><br><span class="line">-e flag ，注意有的时候可能会是-E，flag必须是一个以空格分隔的标志，当xargs分析到含有flag这个标志的时候就停止。</span><br><span class="line">-p 当每次执行一个argument的时候询问一次用户。</span><br><span class="line">-n num 后面加次数，表示命令在执行的时候一次用的argument的个数，默认是用所有的。</span><br><span class="line">-t 表示先打印命令，然后再执行。</span><br><span class="line">-i 或者是-I，这得看linux支持了，将xargs的每项名称，一般是一行一行赋值给 &#123;&#125;，可以用 &#123;&#125; 代替。</span><br><span class="line">-r no-run-if-empty 当xargs的输入为空的时候则停止xargs，不用再去执行了。</span><br><span class="line">-s num 命令行的最大字符数，指的是 xargs 后面那个命令的最大命令行字符数。</span><br><span class="line">-L num 从标准输入一次读取 num 行送给 command 命令。</span><br><span class="line">-l 同 -L。</span><br><span class="line">-d delim 分隔符，默认的xargs分隔符是回车，argument的分隔符是空格，这里修改的是xargs的分隔符。</span><br><span class="line">-x exit的意思，主要是配合-s使用。。</span><br><span class="line">-P 修改最大的进程数，默认是1，为0时候为as many as it can ，这个例子我没有想到，应该平时都用不到的吧。</span><br></pre></td></tr></table></figure>

<h3 id="修改用户信息"><a href="#修改用户信息" class="headerlink" title="修改用户信息"></a>修改用户信息</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="language-bash">usermod 命令就是用来调整使用 useradd 命令添加的用户信息</span></span><br><span class="line">usermod [选项] 用户名</span><br><span class="line">选项：</span><br><span class="line">-c 用户说明：修改用户的说明信息，即修改 /etc/passwd 文件目标用户信息的第 5 个字段；</span><br><span class="line">-d 主目录：修改用户的主目录，即修改 /etc/passwd 文件中目标用户信息的第 6 个字段，需要注意的是，主目录必须写绝对路径；</span><br><span class="line">-e 日期：修改用户的失效曰期，格式为 &quot;YYYY-MM-DD&quot;，即修改 /etc/shadow 文件目标用户密码信息的第 8 个字段；</span><br><span class="line">-g 组名：修改用户的初始组，即修改 /etc/passwd 文件目标用户信息的第 4 个字段（GID）；</span><br><span class="line">-u UID：修改用户的UID，即修改 /etc/passwd 文件目标用户信息的第 3 个字段（UID）；</span><br><span class="line">-G 组名：修改用户的附加组，其实就是把用户加入其他用户组，即修改 /etc/group 文件；</span><br><span class="line">-l 用户名：修改用户名称；</span><br><span class="line">-L：临时锁定用户（Lock）；</span><br><span class="line">-U：解锁用户（Unlock），和 -L 对应；</span><br><span class="line">-s shell：修改用户的登录 Shell，默认是 /bin/bash。</span><br></pre></td></tr></table></figure>

<h3 id="列出系统的所有sudo用户"><a href="#列出系统的所有sudo用户" class="headerlink" title="列出系统的所有sudo用户"></a>列出系统的所有sudo用户</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getent group sudo </span><br></pre></td></tr></table></figure>

<h3 id="查看linux用户密码（需要linux密码）"><a href="#查看linux用户密码（需要linux密码）" class="headerlink" title="查看linux用户密码（需要linux密码）"></a>查看linux用户密码（需要linux密码）</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="language-bash">用户名在/etc/passwd这个文件中；</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">密码在/etc/shadow中</span></span><br><span class="line">cat /etc/passwd</span><br><span class="line"><span class="meta">#</span><span class="language-bash">结果</span></span><br><span class="line">gizwits:x:2021:2021:Gizwits Manager:/home/gizwits:/bin/bash</span><br><span class="line"><span class="meta">#</span><span class="language-bash">格式解释</span></span><br><span class="line"></span><br><span class="line">&#123;用户名&#125;：&#123;加密密码&#125;：&#123;口令最后修改时间距原点(1970-1-1)的天数&#125;：&#123;口令最小修改间隔(防止修改口令，如果时限未到，将恢复至旧口令)：&#123;口令最大修改间隔&#125;：&#123;口令失效前的警告天数&#125;：&#123;账户不活动天数&#125;：&#123;账号失效天数&#125;：&#123;保留&#125;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">为了安全，系统将明文密码进行了加密。查看加密方式</span></span><br><span class="line">authconfig --test | grep hashing</span><br></pre></td></tr></table></figure>

<h3 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">userdel -r 用户名</span><br><span class="line"><span class="meta">#</span><span class="language-bash">用户相关文件也会删除。</span></span><br></pre></td></tr></table></figure>

<h3 id="用户得到权限"><a href="#用户得到权限" class="headerlink" title="用户得到权限"></a>用户得到权限</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo -i 完全取得root的权限和root的工作环境。(只需要验证当前用户账号密码；进程的实际用户ID和有效用户ID都变成了root，主目录也切换为root的主目录)</span><br><span class="line">su root 仅仅取得root权限，工作环境不变，（需要验证root密码；su root和su一样:表示与root建立一个链接，通过root执行命令，其实就是进程的有效用户ID变成了root）</span><br></pre></td></tr></table></figure>

<h3 id="结果黑洞"><a href="#结果黑洞" class="headerlink" title="结果黑洞"></a>结果黑洞</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/dev/null</span><br><span class="line"><span class="meta">#</span><span class="language-bash">脚本没有必要打印或者打印信息过多，减小性能和内存消耗，所以把信息丢到结果黑洞里面</span></span><br></pre></td></tr></table></figure>

<h3 id="查看系统版本"><a href="#查看系统版本" class="headerlink" title="查看系统版本"></a>查看系统版本</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">lsb_release -a</span><br><span class="line">uname -a</span><br><span class="line">cat /proc/version</span><br><span class="line">uname -r</span><br></pre></td></tr></table></figure>

<h3 id="容器内部下载包"><a href="#容器内部下载包" class="headerlink" title="容器内部下载包"></a>容器内部下载包</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apk install 包名</span><br></pre></td></tr></table></figure>

<h3 id="传输超大文件"><a href="#传输超大文件" class="headerlink" title="传输超大文件"></a>传输超大文件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">推送(https://www.cnblogs.com/coolops/p/12843436.html)</span></span><br><span class="line">rsync -auvzP -e &quot;ssh -p22&quot; mssh.tar.gz root@192.168.176.11:/data/</span><br><span class="line"><span class="meta"># </span><span class="language-bash">拉取</span></span><br><span class="line">rsync -auvzP -e &quot;ssh -p22&quot; root@192.168.176.11:/data/mssh.tar.gz .</span><br></pre></td></tr></table></figure>

<h3 id="压缩文件"><a href="#压缩文件" class="headerlink" title="压缩文件"></a>压缩文件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">压缩为*.gz</span></span><br><span class="line">tar -zcvf test.tar.gz test.txt</span><br><span class="line"><span class="meta"># </span><span class="language-bash">gz解压缩</span></span><br><span class="line">tar -zxvf /usr/local/test.tar.gz</span><br></pre></td></tr></table></figure>

<h3 id="更换ubuntu源"><a href="#更换ubuntu源" class="headerlink" title="更换ubuntu源"></a>更换ubuntu源</h3><ol>
<li>&#96;&#96;&#96;shell<ol>
<li>确定系统版本</li>
<li>找到源list</li>
<li>打开vi &#x2F;etc&#x2F;apt&#x2F;sources.list</li>
<li>apt update</li>
<li>apt upgrade<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### ubuntu20.04 图形界面开启与关闭</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="关闭图形界面"><a href="#关闭图形界面" class="headerlink" title="关闭图形界面"></a>关闭图形界面</h1>sudo systemctl set-default multi-user.target<h1 id="开启图形界面"><a href="#开启图形界面" class="headerlink" title="开启图形界面"></a>开启图形界面</h1>sudo systemctl set-default graphical.target<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### centos7命令行安装wmvare tools</span><br><span class="line"></span><br><span class="line">[Linux(CentOS 7)命令行模式安装VMware Tools 详解 - 阳光666 - 博客园 (cnblogs.com)](https://www.cnblogs.com/yblafxw/p/9272330.html)</span><br><span class="line"></span><br><span class="line">### grep查看文件内容</span><br><span class="line"></span><br><span class="line">```shell</span><br><span class="line">grep [options]</span><br><span class="line">[options]主要参数：</span><br><span class="line">－c：只输出匹配行的计数。</span><br><span class="line">－I：不区分大 小写(只适用于单字符)。</span><br><span class="line">－h：查询多文件时不显示文件名。</span><br><span class="line">－l：查询多文件时只输出包含匹配字符的文件名。</span><br><span class="line">－n：显示匹配行及 行号。</span><br><span class="line">－s：不显示不存在或无匹配文本的错误信息。</span><br><span class="line">－v：显示不包含匹配文本的所有行。</span><br><span class="line"></span><br><span class="line"># 查看有内容的文件夹下</span><br><span class="line">grep 内容 -nr 文件夹</span><br><span class="line"># 忽略大小写，文件夹查找内容</span><br><span class="line">grep -i cgroup -nr ./</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ol>
<h2 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h2><h3 id="Linux文件和目录的权限"><a href="#Linux文件和目录的权限" class="headerlink" title="Linux文件和目录的权限"></a><strong>Linux文件和目录的权限</strong></h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="language-bash">文件或目录的权限可以分为3种:</span></span><br><span class="line">r:4 读</span><br><span class="line">w:2 写</span><br><span class="line">x:1  执行(运行)</span><br><span class="line">-：对应数值0</span><br><span class="line">数字 4 、2 和 1表示读、写、执行权限</span><br><span class="line">rwx = 4 + 2 + 1 = 7 (可读写运行）</span><br><span class="line">rw = 4 + 2 = 6 （可读写不可运行）</span><br><span class="line">rx = 4 +1 = 5 （可读可运行不可写）</span><br><span class="line"><span class="meta">#</span><span class="language-bash">比如：最高权限777：（4+2+1）（4+2+1）（4+2+1）</span></span><br><span class="line">第一个7:表示当前文件的拥有者的权限,7=4+2+1 可读可写可执行权限</span><br><span class="line">第二个7:表示当前文件的所属组（同组用户）权限,7=4+2+1 可读可写可执行权限</span><br><span class="line">第三个7:表示当前文件的组外权限,7=4+2+1 可读可写可执行权限</span><br></pre></td></tr></table></figure>

<h3 id="查看文件权限"><a href="#查看文件权限" class="headerlink" title="查看文件权限"></a>查看文件权限</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ls -l </span><br><span class="line">ls ll </span><br><span class="line">ls -al</span><br><span class="line">结果分为7列</span><br><span class="line">    第一列：文件类型，1-代表普通文件 d-代表目录</span><br><span class="line">　　第二列：文件节点数（node）</span><br><span class="line">　　第三列：表示文件拥有者root用户</span><br><span class="line">　　第四列：表示文件所属组root用户组</span><br><span class="line">　　第五列：显示文件大小，默认是字节byte，可以通过命令 ls -lh 更人性化地查看文件大小</span><br><span class="line">　　第六列：文件最后修改时间</span><br><span class="line">　　第七咧：文件或目录的名称</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="设置文件权限"><a href="#设置文件权限" class="headerlink" title="设置文件权限"></a>设置文件权限</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="language-bash">格式：chomd 755 文件名</span></span><br><span class="line">chown  xww  test       \\将test文件的属主改为xww用户</span><br><span class="line">chown  xww.xww  test      \\将test文件的属主改为xww用户，属组改为xww组</span><br><span class="line">chown  -R  xww:xww test   \\将test及其下的所有目录和文件的属主改为xww用户，属组改为xww组。参数-R有递归作用</span><br></pre></td></tr></table></figure>

<h3 id="查看文件夹大小"><a href="#查看文件夹大小" class="headerlink" title="查看文件夹大小"></a>查看文件夹大小</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">du -h --max-depth=1 文件夹名</span><br></pre></td></tr></table></figure>

<h3 id="文件大小排序查看"><a href="#文件大小排序查看" class="headerlink" title="文件大小排序查看"></a>文件大小排序查看</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ls -Sl -hl	#降序</span><br><span class="line">ls -Slr -hl #升序</span><br></pre></td></tr></table></figure>

<h3 id="创建软连接"><a href="#创建软连接" class="headerlink" title="创建软连接"></a>创建软连接</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s   /tmp/aaa.sh /home/link    //在home下创建一个名为link的软链接，指向/tmp/aaa.sh</span><br></pre></td></tr></table></figure>

<h2 id="系统属性命令"><a href="#系统属性命令" class="headerlink" title="系统属性命令"></a>系统属性命令</h2><h3 id="查看系统cpu使用情况"><a href="#查看系统cpu使用情况" class="headerlink" title="查看系统cpu使用情况"></a>查看系统cpu使用情况</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">top	#查看当前cpu使用情况。</span><br><span class="line"><span class="meta">#</span><span class="language-bash">1 其中以<span class="built_in">id</span>结尾的就是当前系统的cpu空闲率</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">2 其中load average 三个数字代表1 5 15分钟前到现在的系统负载平均值</span></span><br></pre></td></tr></table></figure>

<h3 id="查看内核版本"><a href="#查看内核版本" class="headerlink" title="查看内核版本"></a>查看内核版本</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/version</span><br><span class="line">uname -a</span><br><span class="line">uname -r</span><br></pre></td></tr></table></figure>

<h3 id="查看linux版本信息"><a href="#查看linux版本信息" class="headerlink" title="查看linux版本信息"></a>查看linux版本信息</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lsb_release -a</span><br><span class="line">cat /etc/issue</span><br></pre></td></tr></table></figure>

<p>shell环境变量</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="language-bash">查看shell环境变量</span></span><br><span class="line">export</span><br><span class="line">echo $变量名</span><br><span class="line"><span class="meta">#</span><span class="language-bash">添加环境变量</span></span><br><span class="line">export 变量名=变量值</span><br><span class="line"><span class="meta">#</span><span class="language-bash">环境变量可以在其进程的子进程中继续有效，而自定义变量则无效</span></span><br></pre></td></tr></table></figure>

<p>查看硬盘内存大小</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">df -h</span><br><span class="line"><span class="meta"># </span><span class="language-bash">查看磁盘剩余空间信息</span></span><br><span class="line">df -hl</span><br></pre></td></tr></table></figure>

<p>关闭防火墙</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ubuntu</span><br><span class="line">ufw status</span><br><span class="line">ufw disable</span><br><span class="line">ufw enable</span><br></pre></td></tr></table></figure>



<h3 id="查看端口占用情况"><a href="#查看端口占用情况" class="headerlink" title="查看端口占用情况"></a>查看端口占用情况</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">lsof -i:端口号</span><br><span class="line">netstat -tunlp | grep 端口号</span><br><span class="line">netstat -ntlp   //查看当前所有tcp端口</span><br><span class="line">netstat -ntulp | grep 80   //查看所有80端口使用情况</span><br><span class="line">netstat -ntulp | grep 3306   //查看所有3306端口使用情况</span><br></pre></td></tr></table></figure>

<h3 id="杀死进程"><a href="#杀死进程" class="headerlink" title="杀死进程"></a>杀死进程</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kill -9 PID</span><br></pre></td></tr></table></figure>

<h3 id="查看全部进程"><a href="#查看全部进程" class="headerlink" title="查看全部进程"></a>查看全部进程</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> ps aux | less	# 显示所有运行中的进程：</span><br><span class="line"> pstree</span><br><span class="line"> top</span><br><span class="line"> ps -e			# 查看系统中的每个进程。</span><br><span class="line">ps -U root -u root -N		# 查看非root运行的进程</span><br><span class="line">ps -u vivek					# 查看用户vivek运行的进程</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>重启网卡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1、service network restart</span><br><span class="line">2、ifconfig eth0 down / ifconfig eth0 up</span><br><span class="line">3、ifdown eth0 / ifup eth0</span><br></pre></td></tr></table></figure>



<h2 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h2><h3 id="虚拟机外部访问"><a href="#虚拟机外部访问" class="headerlink" title="虚拟机外部访问"></a>虚拟机外部访问</h3><p>​    设置成桥接模式，外部网络可以访问。NAT模式只是共享主机IP,外部一般无法访问</p>
<h2 id="疑难杂症"><a href="#疑难杂症" class="headerlink" title="疑难杂症"></a>疑难杂症</h2><h3 id="系统盘变为只读文件的修复"><a href="#系统盘变为只读文件的修复" class="headerlink" title="系统盘变为只读文件的修复"></a>系统盘变为只读文件的修复</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">centos7</span></span><br><span class="line">df -Th</span><br><span class="line"><span class="meta"># </span><span class="language-bash">找到centos-root</span></span><br><span class="line"><span class="meta">	#</span><span class="language-bash">如：/dev/mapper/centos-root xfs 34G 1.3G 32G 4% /</span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">重新挂载</span></span><br><span class="line">mount -o rw,remount /dev/mapper/centos-root /</span><br></pre></td></tr></table></figure>

<h2 id="包下载地址"><a href="#包下载地址" class="headerlink" title="包下载地址"></a>包下载地址</h2><h3 id="ffmpeg"><a href="#ffmpeg" class="headerlink" title="ffmpeg:"></a>ffmpeg:</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://ffmpeg.org/releases/</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/02/16/linux/" data-id="ckzp65exv0001fcv1dssj3956" data-title="linux" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2022/02/16/GIT/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          GIT
        
      </div>
    </a>
  
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/02/16/GIT/">GIT</a>
          </li>
        
          <li>
            <a href="/2022/02/16/linux/">linux</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>