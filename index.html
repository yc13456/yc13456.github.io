<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.0.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-docker" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/02/16/docker/" class="article-date">
  <time class="dt-published" datetime="2022-02-16T06:38:13.000Z" itemprop="datePublished">2022-02-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/02/16/docker/">docker</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h1><h2 id="底层原理"><a href="#底层原理" class="headerlink" title="底层原理"></a>底层原理</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Docker是一个**Client-Server结构的系统，Docker守护进程（Docker daemon）运行在主机上， 然后通过Socket连接从客户端访问，守护进程从客户端接受命令并管理运行在主机上的容器。 容器，是一个运行时环境，就是我们前面说到的集装箱。</span><br></pre></td></tr></table></figure>

<p><img src="C:/Users/yc/Pictures/typora_Images/1.png" alt="1"></p>
<h2 id="为什么Docker比较比VM快"><a href="#为什么Docker比较比VM快" class="headerlink" title="为什么Docker比较比VM快"></a>为什么Docker比较比VM快</h2><p><img src="C:/Users/yc/Pictures/typora_Images/image-20210713112143246.png" alt="image-20210713112143246"></p>
<h2 id="docker常用命令"><a href="#docker常用命令" class="headerlink" title="docker常用命令"></a>docker常用命令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">帮助命令</span><br><span class="line">docker version</span><br><span class="line">docker info</span><br><span class="line">docker 命令 --help	#帮助</span><br><span class="line">帮助文档地址：https://docs.docker.com/engine/reference/commandline/images/</span><br><span class="line">systemctl enable docker # 开机自动启动docker</span><br><span class="line">systemctl start docker # 启动docker</span><br><span class="line">systemctl restart docker # 重启dokcer</span><br></pre></td></tr></table></figure>

<h2 id="镜像命令"><a href="#镜像命令" class="headerlink" title="镜像命令"></a>镜像命令</h2><h3 id="查看全部本地镜像"><a href="#查看全部本地镜像" class="headerlink" title="查看全部本地镜像"></a>查看全部本地镜像</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image</span><br></pre></td></tr></table></figure>

<p><img src="C:/Users/yc/Pictures/typora_Images/image-20210713112918247.png" alt="image-20210713112918247"></p>
<h3 id="镜像搜索"><a href="#镜像搜索" class="headerlink" title="镜像搜索"></a><strong>镜像搜索</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search 包名</span><br></pre></td></tr></table></figure>

<h3 id="镜像下载："><a href="#镜像下载：" class="headerlink" title="镜像下载："></a><strong>镜像下载：</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull 镜像名</span><br></pre></td></tr></table></figure>

<h3 id="镜像删除："><a href="#镜像删除：" class="headerlink" title="镜像删除："></a><strong>镜像删除：</strong></h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker rmi -f 镜像ID #删除指定的镜像</span><br><span class="line">docker rmi -f 镜像ID 镜像ID镜像ID#删除多个镜像</span><br><span class="line">docker rmi -f $(docker images -aq) #删除全部镜像</span><br></pre></td></tr></table></figure>

<h3 id="查看镜像历史变更历史"><a href="#查看镜像历史变更历史" class="headerlink" title="查看镜像历史变更历史"></a>查看镜像历史变更历史</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker history IMAGE ID</span><br></pre></td></tr></table></figure>



<h2 id="容器命令"><a href="#容器命令" class="headerlink" title="容器命令"></a><strong>容器命令</strong></h2><h3 id="新建容器并启动"><a href="#新建容器并启动" class="headerlink" title="新建容器并启动:"></a><strong>新建容器并启动</strong>:</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run [可选参数] image</span><br><span class="line">#参数说明</span><br><span class="line">--name=&#x27;NAME&#x27; #容器名</span><br><span class="line">-d #后台方式运行</span><br><span class="line">-it #交互运行方式</span><br><span class="line">-p #指定容器端口 -p 8080:8080</span><br></pre></td></tr></table></figure>

<h3 id="列出所有运行的容器"><a href="#列出所有运行的容器" class="headerlink" title="列出所有运行的容器"></a>列出所有运行的容器</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker ps 命令	#列出当前在运行的容器</span><br><span class="line">-a #列出当前在运行的容器，带出历史运行的容器</span><br><span class="line">-n=? #显示最近创建的容器，显示个数</span><br><span class="line">-a #显示容器的编号，-aq显示容器编号</span><br></pre></td></tr></table></figure>

<h3 id="退出容器"><a href="#退出容器" class="headerlink" title="退出容器"></a>退出容器</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">exit #停止容器并推出</span><br><span class="line">ctrl +P+Q #容器不停止退出</span><br></pre></td></tr></table></figure>

<h3 id="删除容器"><a href="#删除容器" class="headerlink" title="删除容器"></a>删除容器</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker rm 容器ID 	#删除指定容器，不能删除正在运行容器</span><br><span class="line">docker rm -f $(docker ps -aq) #删除所有容器</span><br><span class="line">docker ps -a -q|xargs docker rm #删除所有容器</span><br></pre></td></tr></table></figure>

<h3 id="启动和停止容器操作"><a href="#启动和停止容器操作" class="headerlink" title="启动和停止容器操作"></a>启动和停止容器操作</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker start 容器ID	#启动容器</span><br><span class="line">docker restart 容器id #重启容器</span><br><span class="line">docker stop #停止容器</span><br></pre></td></tr></table></figure>

<h2 id="常用其他命令"><a href="#常用其他命令" class="headerlink" title="常用其他命令"></a><strong>常用其他命令</strong></h2><h3 id="后台启动容器"><a href="#后台启动容器" class="headerlink" title="后台启动容器"></a>后台启动容器</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run -d 镜像名</span><br><span class="line">#问题docker ps ,发现centos停止</span><br><span class="line">#docker 容器使用后台运行，必须要有一个前台进程，docker发现没有应用，就自动停止</span><br><span class="line">#nginx，容器启动后，发现自己没有提供服务，就会立刻停止</span><br></pre></td></tr></table></figure>

<h3 id="日志查询"><a href="#日志查询" class="headerlink" title="日志查询"></a>日志查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker -f -t --tail 数据条数 容器ID</span><br><span class="line">#自己写一段日志Shell</span><br><span class="line">docker run -d centos /bin/sh -c &quot;while true;do echo kaung1;sleep 1;done&quot;</span><br><span class="line">#显示日志</span><br><span class="line">-tf	#显示日志</span><br><span class="line">--tail	#要显示的日志条数</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="查看容器中的进程信息"><a href="#查看容器中的进程信息" class="headerlink" title="查看容器中的进程信息"></a>查看容器中的进程信息</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#top命令</span><br><span class="line">docker top 容器ID</span><br><span class="line">UID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD</span><br><span class="line">root                41620               41601               0                   12:27               ?                   00:00:00            /bin/sh -c while true;do echo kaung1;sleep 1;done</span><br><span class="line">root                42191               41620               0                   12:36               ?                   00:00:00            /usr/bin/coreutils --coreutils-prog-shebang=sleep /usr/bin/sleep 1</span><br></pre></td></tr></table></figure>

<h3 id="查看镜像元数据"><a href="#查看镜像元数据" class="headerlink" title="查看镜像元数据"></a>查看镜像元数据</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect 镜像id	#</span><br></pre></td></tr></table></figure>

<h3 id="进入当前正在运行的容器"><a href="#进入当前正在运行的容器" class="headerlink" title="进入当前正在运行的容器"></a>进入当前正在运行的容器</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#通常容器使用后台方式运行，需要进入容器，修改配置</span><br><span class="line">#方式一</span><br><span class="line">docker exec -it 容器id /bin/bash	#进入容器后开启一个新的终端，可以在里面操作(常用)</span><br><span class="line">#方式二：</span><br><span class="line">docker attach -it 容器名 /bin/bash	#进入容器正在执行的终端，不会启动新的进程</span><br></pre></td></tr></table></figure>

<h3 id="从容器内拷贝到本机"><a href="#从容器内拷贝到本机" class="headerlink" title="从容器内拷贝到本机"></a>从容器内拷贝到本机</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#在容器内部新建一个文件，然后退出容器，使用本机终端拷贝容器文件。</span><br><span class="line">docker cp 容器名:/容器内文件路劲 /本机路径</span><br></pre></td></tr></table></figure>

<h3 id="从本机拷贝到容器"><a href="#从本机拷贝到容器" class="headerlink" title="从本机拷贝到容器"></a>从本机拷贝到容器</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker cp  /本机文件路径 容器名:/容器路径</span><br></pre></td></tr></table></figure>

<h3 id="查看docker镜像端口映射情况"><a href="#查看docker镜像端口映射情况" class="headerlink" title="查看docker镜像端口映射情况"></a>查看docker镜像端口映射情况</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker container port CONTAINER</span><br><span class="line">	8080/tcp -&gt; 0.0.0.0:9090</span><br><span class="line">	8080/tcp -&gt; :::9090	</span><br></pre></td></tr></table></figure>



<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><p><img src="C:/Users/yc/Pictures/typora_Images/2.png" alt="2"></p>
<h2 id="软件安装"><a href="#软件安装" class="headerlink" title="软件安装"></a>软件安装</h2><h3 id="docker安装nginx"><a href="#docker安装nginx" class="headerlink" title="docker安装nginx"></a>docker安装nginx</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1、搜索镜像	#search 建议dockerhub搜索，观看详细信息</span><br><span class="line">2、下载镜像 	#pull</span><br><span class="line">3、运行测试：docker run -d --name nginx01 -p 3344:80 nginx</span><br><span class="line">	-d 后台运行</span><br><span class="line">	-name 容器名</span><br><span class="line">	-p 端口映射，将容器暴露出来的3344端口，映射到80端口</span><br></pre></td></tr></table></figure>

<p>端口暴露</p>
<p><img src="C:/Users/yc/Pictures/typora_Images/image-20210713133946995.png" alt="image-20210713133946995"></p>
<h3 id="docker部署tomcat"><a href="#docker部署tomcat" class="headerlink" title="docker部署tomcat"></a>docker部署tomcat</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#官方使用（用完就删除容器）</span><br><span class="line">docker run -it --rm tomcat:9.0</span><br><span class="line">#我们之前的启动都是后台，容器可以查到。（官方方式测试适用）</span><br><span class="line"></span><br><span class="line">#正常下载启动</span><br><span class="line">pull下载 启动</span><br><span class="line">	docker run -d --name tomcat01 -p 3355:8080 tomcats</span><br><span class="line">#运行之后不能成运行（阿里云镜像问题，默认最小镜像），需要把webapps.dist文件拷贝到webapps文件夹下面，就可以访问tomcat欢迎界面</span><br></pre></td></tr></table></figure>

<h3 id="docker部署ES-kibana"><a href="#docker部署ES-kibana" class="headerlink" title="docker部署ES+kibana"></a>docker部署ES+kibana</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">es	</span><br><span class="line">#暴露端口很多、十分消耗内存、数据一般需要防止到安全目录！挂载、</span><br><span class="line">#--net somenetwork ?网路配置</span><br><span class="line">#启动elasticsearch</span><br><span class="line">docker run -d --name elasticsearch -p 9200:9200 -p 9300:9300 -e &quot;discovery.type=single-node&quot; elasticsearch:7.6.2</span><br><span class="line"></span><br><span class="line">#启动linux会卡住，docker status 查看cpu状态</span><br><span class="line">#需要增加内存限制,修改配置文件-e，环境配置修改</span><br><span class="line">docker run -d --name elasticsearch -p 9200:9200 -p 9300:9300 -e &quot;discovery.type=single-node&quot; -e ES_JAVA_OPTS=&quot;-Xms64m -Xms512m&quot; elasticsearch:7.6.2s</span><br></pre></td></tr></table></figure>

<p><img src="C:/Users/yc/Pictures/typora_Images/image-20210714093603591.png" alt="image-20210714093603591"></p>
<h2 id="可视化"><a href="#可视化" class="headerlink" title="可视化"></a>可视化</h2><h3 id="portainer：Docker图形化管理界面"><a href="#portainer：Docker图形化管理界面" class="headerlink" title="portainer：Docker图形化管理界面"></a>portainer：Docker图形化管理界面</h3><h2 id="Docker镜像讲解"><a href="#Docker镜像讲解" class="headerlink" title="Docker镜像讲解"></a>Docker镜像讲解</h2><h3 id="镜像是什么"><a href="#镜像是什么" class="headerlink" title="镜像是什么"></a>镜像是什么</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">镜像是一种轻量级、可执行的独立软件包,用来打包软件运行环境和基于运行环境开发的软件,它包含运行某个软件所需的所有内容,包括代码、运行时、库、环境变量和配置文件。</span><br></pre></td></tr></table></figure>

<h3 id="如何得到镜像"><a href="#如何得到镜像" class="headerlink" title="如何得到镜像"></a>如何得到镜像</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. 从远程仓库下载</span><br><span class="line">2. 本地拷贝</span><br><span class="line">3. 自己制作镜像DockerFile</span><br></pre></td></tr></table></figure>

<h3 id="联合文件系统"><a href="#联合文件系统" class="headerlink" title="联合文件系统"></a>联合文件系统</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">UnionFS (联合文件系统) : Union文件系统( UnionFS)是一种分层、 轻量级并且高性能的文件系统,它支持对文件系统的修改作为一次提交来-层层的叠加,同时可以将不同目录挂载到同一个虚拟文件系统下(unite several directories into a single virtual filesystem)。Union 文件系统是Docker镜像的基础。镜像可以通过分层来进行继承,基于基础镜像(没有父镜像) , 可以制作各种具体的应用镜像。</span><br><span class="line">特性:一次同时加载多个文件系统,但从外面看起来,只能看到-个文件系统,联合加载会把各层文件系统叠加起来,这样最终的文件系统会包含所有底层的文件和目录</span><br><span class="line">比如:nginx镜像包含了centos镜像，则该容器内部另外镜像，mysql不需要另外下载centos镜像。可直接共用！</span><br></pre></td></tr></table></figure>

<h3 id="Docker镜像加载原理"><a href="#Docker镜像加载原理" class="headerlink" title="Docker镜像加载原理"></a>Docker镜像加载原理</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker的镜像实际上由一层层的文件系统组成,这种层级的文件系统UnionFS。</span><br><span class="line">bootfs(boot file system)主要包含bootloader和kernel, bootloader主要是引导加载kernel, Linux刚启动时会加载bootfs文件系统,在Docker镜像的最底层是bootfs。这一层与我们典型的Linux/Unix系统是一样的,包含boo加载器和内核。当boo加载完成之后整个内核就都在内存中了,此时内存的使用权已由bootfs转交给内核,此时系统也会卸载bootfs.</span><br><span class="line">rootfs (root file system) , 在bootfs之上。包含的就是典型Linux系统中的/dev, /proc, /bin, /etc等标准目录和文件。rootfs就是各种不同的操作系统发行版,比如Ubuntu , Centos等等。</span><br><span class="line">精简OS操作系统只包含指令操作命令，bootfs文件就精简了不少。（虚拟机分钟级，容器秒级）</span><br></pre></td></tr></table></figure>

<p><img src="C:/Users/yc/Pictures/typora_Images/image-20210714100210939.png" alt="image-20210714100210939">                            镜像加载图</p>
<h2 id="镜像分层理解"><a href="#镜像分层理解" class="headerlink" title="镜像分层理解"></a>镜像分层理解</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">	所有的Docker镜像都起始于一个基础镜像层,当进行修改或增加新的内容时,就会在当前镜像层之上,创建新的镜像层。</span><br><span class="line">举一个简单的例子,假如基于Ubuntu Linux 16.04创建一个新的镜像 ,这就是新镜像的第-层;如果在该镜像中添加Python包,</span><br><span class="line">就会在基础镜像层之上创建第二个镜像层;如果继续添加一个安全补丁, 就会创建第三个镜像层。</span><br><span class="line">	镜像之间若有组件交互，可以互相访问获取。具体见联合镜像系统</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">特点：</span><br><span class="line">	Docker镜像都是只读的,当容器启动时,一个新的可写层被加载到镜像的顶部!</span><br><span class="line">这一层就是我们通常说的容器层,容器之下的都叫镜像层!</span><br></pre></td></tr></table></figure>

<p><img src="C:/Users/yc/Pictures/typora_Images/image-20210714101221487.png" alt="image-20210714101221487">        镜像下载，容器打包过程</p>
<p>commit镜像（提交容器）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker commit 提交容器成为一个副本</span><br><span class="line">docker commit -m=</span><br></pre></td></tr></table></figure>

<p>docker 内部系统配置能共享到外层操作系统吗？</p>
<p>手动开放docker端口映射：比如外层8080：容器9090？</p>
<h2 id="DockerFile"><a href="#DockerFile" class="headerlink" title="DockerFile"></a>DockerFile</h2><h3 id="DockerFile构建过程"><a href="#DockerFile构建过程" class="headerlink" title="DockerFile构建过程"></a>DockerFile构建过程</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="language-bash">基础知识:</span></span><br><span class="line">1、每个保留关键字(指令)都是必须是大写字母</span><br><span class="line">2.执行从上到下顺序执行</span><br><span class="line">3. #表示注释</span><br><span class="line">4、每一个指令都会创建提交-个新的镜像层 ,并提交!</span><br><span class="line"></span><br><span class="line">dockerfile是用来构建dokcer镜像的文件!令参数脚本!</span><br><span class="line"><span class="meta">#</span><span class="language-bash">构建步骤:</span></span><br><span class="line">1、编写一个dockerfile 脚本文件</span><br><span class="line">2、docker build构建成为一个镜像</span><br><span class="line">3、docker run运行镜像</span><br><span class="line">4、docker push发布镜像( DockerHub、阿里云镜像仓库!)</span><br><span class="line"><span class="meta">#</span><span class="language-bash">注意：官方镜像是精简版本，镜像需要自己数据构建</span></span><br></pre></td></tr></table></figure>

<p><img src="/../../../../Pictures/typora_Images/image-20210720095540019.png" alt="image-20210720095540019"></p>
<p>dockerFile面向开发</p>
<p>Docker镜像渐成为企业交付的标准,必须要掌握! I</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="language-bash">步骤:开发,部署,运维。。。缺一不可</span></span><br><span class="line">DockerFile:构建文件,义了一切的步骤,源代码</span><br><span class="line">Dockerlmages :通过DockerFile构建生成的镜像.最终发布和运行的产品!</span><br><span class="line">Docker容器:容器就是镜像运行起来提供服务器</span><br></pre></td></tr></table></figure>

<h3 id="DockerFile指令"><a href="#DockerFile指令" class="headerlink" title="DockerFile指令"></a>DockerFile指令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">FROM			#基础镜像,一切从此构建</span><br><span class="line">MAINTAINER		 #镜像的作者，姓名+邮箱</span><br><span class="line">RUN 			#镜像构建的运行的命令</span><br><span class="line">ADD				#步骤，添加内容</span><br><span class="line">WORKDIR			#镜像工作目录</span><br><span class="line">VOLUME			#挂在目录</span><br><span class="line">EXPOST 			#保留的端口</span><br><span class="line">CMD				#直嘀咕容器启动的时候需要运行的命令，只有最后一个命令会生效，可被替代</span><br><span class="line">ENTRYPOINT		#指定容器启动运行的命令，可以追加</span><br><span class="line">ONBUILD			#构建一个被继承的DockerFile这个时候就会运行ONBUILD指令，触发指令</span><br><span class="line">COPY			#类似ADD,将我们文件拷贝到镜像中</span><br><span class="line">ENV				#构建的时候设置的环境变量</span><br></pre></td></tr></table></figure>

<h3 id="实战测试-1、自定义创建centos镜像"><a href="#实战测试-1、自定义创建centos镜像" class="headerlink" title="实战测试 1、自定义创建centos镜像"></a>实战测试 1、自定义创建centos镜像</h3><p>Docker Hub中绝大多数镜像都是从基础镜像过来</p>
<h1 id=""><a href="#" class="headerlink" title=""></a></h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">1 编写DockerFile文件</span> </span><br><span class="line">FROM centos</span><br><span class="line">MAINTAINER yc&lt;yc_13456@163.com&gt;</span><br><span class="line"></span><br><span class="line">ENV MYPATH /usr/local	#进入系统的目录，一般设置成工作目录</span><br><span class="line">WORKDIR $MYPATH</span><br><span class="line"></span><br><span class="line">RUN /bin/sh -c yum -y insta1l vim	#（一般情况下：RUN yum -y insta1l vim）</span><br><span class="line">RUN /bin/sh -c yum -y insta1l vim net-tools</span><br><span class="line">EXPOSE 80</span><br><span class="line"></span><br><span class="line">CMD echo $MYPATH</span><br><span class="line">CMD echo &quot;----end----&quot;</span><br><span class="line">CMD /bin/bash</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">2 通过文件构造镜像</span></span><br><span class="line">docker build -f mydockerfile-centos -t mycentos:0.1 .</span><br><span class="line"><span class="meta">#</span><span class="language-bash">结果</span></span><br><span class="line">Successfully built 06999096179c</span><br><span class="line">Successfully tagged mycentos:0.1</span><br></pre></td></tr></table></figure>



<h3 id="实战测试2、创建Tomcat镜像（未完待续…）"><a href="#实战测试2、创建Tomcat镜像（未完待续…）" class="headerlink" title="实战测试2、创建Tomcat镜像（未完待续…）"></a>实战测试2、创建Tomcat镜像（未完待续…）</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">FROM centos</span><br><span class="line">MAINTAINET yc&lt;yc_13456@163.com&gt;</span><br><span class="line"></span><br><span class="line">COPY readme.txt /usr/yc/readme.txt</span><br><span class="line"></span><br><span class="line">ADD jdk-8u221-linux-x64.tar.gz /home/yc</span><br><span class="line">ADD apache-tomcat-9.0.50.tar.gz /home/yc</span><br><span class="line"></span><br><span class="line">RUN yum -y install vim</span><br><span class="line">RUN MYPATH /home/yc</span><br><span class="line">WORKDIR $MYPATH</span><br><span class="line"></span><br><span class="line">ENV JAVA_HOME /home/yc/jdk1.8.1_22</span><br><span class="line">ENV CLASSPATH $JAVA_HOME/lib/dt/jar:$JAVA_HOME/lib/tools.jar</span><br><span class="line">ENV CATALINA_HOME /home/yc/apache-tomcat-9.0.50</span><br><span class="line">ENV CATALINA_BASH /home/yc/apache-tomcat-9.0.50</span><br><span class="line">ENV PATH $PATH:$JAVA_HOME/bin:$CATALINA_HOME/lib:$CATALINA_HOME/bi</span><br><span class="line"></span><br><span class="line">EXPOSE 8080</span><br><span class="line"></span><br><span class="line">CMD /home/yc/apache-tomcat-9.0.50/bin/startup.sh &amp;&amp;tail -F /home/yc/apache-tomcat-9.0.50/bin/logs/catalina.out</span><br></pre></td></tr></table></figure>

<h3 id="容器内部查看端口"><a href="#容器内部查看端口" class="headerlink" title="容器内部查看端口"></a>容器内部查看端口</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep 50000</span><br></pre></td></tr></table></figure>

<h2 id="DockerHub"><a href="#DockerHub" class="headerlink" title="DockerHub"></a>DockerHub</h2><h3 id="登陆dockerHub"><a href="#登陆dockerHub" class="headerlink" title="登陆dockerHub"></a>登陆dockerHub</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker login</span><br><span class="line">docker login -u userID -p passwd 远程仓库名</span><br></pre></td></tr></table></figure>

<h3 id="登出dockerHub"><a href="#登出dockerHub" class="headerlink" title="登出dockerHub"></a>登出dockerHub</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker lougout url</span><br></pre></td></tr></table></figure>

<p>查看登陆信息</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat ~/.docker/config.json </span><br></pre></td></tr></table></figure>

<p>推送镜像到远程仓库</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="language-bash">打标签</span></span><br><span class="line">docker tag 镜像ID dockerHub用户名称/远程仓库名:tag</span><br><span class="line"><span class="meta">#</span><span class="language-bash">推送</span></span><br><span class="line">docker push dockerHub用户名称/远程仓库名:tag</span><br></pre></td></tr></table></figure>




      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/02/16/docker/" data-id="ckzp6o4ob0000vwv1g0zk5f1s" data-title="docker" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-GIT" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/02/16/GIT/" class="article-date">
  <time class="dt-published" datetime="2022-02-16T06:23:01.000Z" itemprop="datePublished">2022-02-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/02/16/GIT/">GIT</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="Git基本使用"><a href="#Git基本使用" class="headerlink" title="Git基本使用"></a>Git基本使用</h2><h3 id="Git工作流程"><a href="#Git工作流程" class="headerlink" title="Git工作流程"></a>Git工作流程</h3><ol>
<li>克隆 Git 资源作为工作目录。</li>
<li>在克隆的资源上添加或修改文件</li>
<li>如果其他人修改了，你可以更新资源。</li>
<li>在提交前查看修改。</li>
<li>提交修改。</li>
<li>修改完成后，如果发现错误，可以撤回提交并再次修改并提交。</li>
</ol>
<p><img src="https://www.runoob.com/wp-content/uploads/2015/02/git-process.png" alt="img"></p>
<h3 id="Git-工作区、暂存区和版本库"><a href="#Git-工作区、暂存区和版本库" class="headerlink" title="Git 工作区、暂存区和版本库"></a>Git 工作区、暂存区和版本库</h3><h4 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h4><ol>
<li><strong>工作区：</strong>在电脑里能看到的目录。</li>
<li><strong>暂存区：</strong>英文叫 stage 或 index。一般存放在 <strong>.git</strong> 目录下的 index 文件（.git&#x2F;index）中，所以我们把暂存区有时也叫作索引（index）。</li>
<li><strong>版本库：</strong>工作区有一个隐藏目录 <strong>.git</strong>，这个不算工作区，而是 Git 的版本库。</li>
</ol>
<p><img src="https://www.runoob.com/wp-content/uploads/2015/02/1352126739_7909.jpg" alt="img"></p>
<p>Git指令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="language-bash">打标签：</span></span><br><span class="line">git tag -a 标签名 -m 标签描述</span><br><span class="line">git push 本地branch名 标签名</span><br><span class="line"><span class="meta">#</span><span class="language-bash">删除本地标签</span></span><br><span class="line">git tag -d 标签名</span><br><span class="line"><span class="meta">#</span><span class="language-bash">删除远程仓库tag</span></span><br><span class="line">git push origin :refs/tags/标签名</span><br><span class="line"><span class="meta">#</span><span class="language-bash">建立本地ssh密钥</span></span><br><span class="line">ssh-keygen -t rsa -C &quot;yc_13456@163.com&quot;</span><br><span class="line"><span class="meta">#</span><span class="language-bash">验证是否能连接github</span></span><br><span class="line">ssh -T git@github.com</span><br><span class="line"><span class="meta">#</span><span class="language-bash">获取云端有，本地没有的数据</span></span><br><span class="line">git fetch [alias]</span><br><span class="line"><span class="meta">#</span><span class="language-bash">将服务器上的任何更新（假设有人这时候推送到服务器了）合并到你的当前分支。</span></span><br><span class="line">git merge [alias]/[branch]</span><br></pre></td></tr></table></figure>

<p>获取远程分支到本地</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git fetch origin remote仓库</span><br><span class="line">git checkout remote仓库</span><br><span class="line">git pull</span><br></pre></td></tr></table></figure>

<p>pk:(10万一个)<br>mac:1-500000<br>did:1-500000</p>
<p>40万次请求（第一次缓存，第一次读）<br>10 个客户端（5个。5个）</p>
<h2 id="go-get-访问私有仓库的问题"><a href="#go-get-访问私有仓库的问题" class="headerlink" title="go get 访问私有仓库的问题"></a>go get 访问私有仓库的问题</h2><ul>
<li>给仓库打 tag，这样仓库地址可以被识别</li>
<li>export GOPRIVATE&#x3D;<a href="mailto:&#x67;&#x69;&#x74;&#x40;&#x67;&#x69;&#116;&#104;&#117;&#x62;&#46;&#x63;&#111;&#109;">&#x67;&#x69;&#x74;&#x40;&#x67;&#x69;&#116;&#104;&#117;&#x62;&#46;&#x63;&#111;&#109;</a>；go build 时，系统不会用 GOPROXY 以及校验 SUM</li>
<li>调整 git https 为 ssh</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global url.&quot;git@gitlab.gizwits.com:&quot;.insteadof &quot;https://gitlab.gizwits.com/&quot;</span><br></pre></td></tr></table></figure>



<p>容器编译</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1、安装go</span><br><span class="line">2、编译gocv、安装webp</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>删除add 缓存区文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm .git/index</span><br></pre></td></tr></table></figure>

<p>撤销commit文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git reset --soft HEAD^ #撤销最后一次</span><br><span class="line">git reset --soft HEAD~2 # 撤销最后二次</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/02/16/GIT/" data-id="ckzp65exn0000fcv1ge9d2ha7" data-title="GIT" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-linux" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/02/16/linux/" class="article-date">
  <time class="dt-published" datetime="2022-02-16T04:53:55.000Z" itemprop="datePublished">2022-02-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/02/16/linux/">linux</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="linux笔记"><a href="#linux笔记" class="headerlink" title="linux笔记"></a>linux笔记</h1><h3 id="查看服务"><a href="#查看服务" class="headerlink" title="查看服务"></a>查看服务</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status 服务名</span><br></pre></td></tr></table></figure>

<h3 id="配置CentOS7网络"><a href="#配置CentOS7网络" class="headerlink" title="#配置CentOS7网络"></a>#配置CentOS7网络</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sysconfig/network-scripts/ifcfg-ens33</span><br><span class="line">#这一项改为YES（ONBOOT=yes）</span><br><span class="line">#重启网卡:</span><br><span class="line">sudo service network restart</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;字符串&quot;：换行打印；</span><br><span class="line">echo -n &quot;字符串&quot; 不换行打印&#x27;;</span><br><span class="line">echo -e选项输出转义字符</span><br></pre></td></tr></table></figure>

<h3 id="nc测试网路请求"><a href="#nc测试网路请求" class="headerlink" title="#nc测试网路请求"></a>#nc测试网路请求</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nc -lp 9999 #以本机作为服务端，监听9999端口</span><br><span class="line">nc 192.168.153.130 9999 #客户端机器使用netcat 和ip地址进行连接。</span><br></pre></td></tr></table></figure>

<h3 id="进程阻塞与非阻塞"><a href="#进程阻塞与非阻塞" class="headerlink" title="进程阻塞与非阻塞"></a>进程阻塞与非阻塞</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">同步阻塞：当A调用B的时候，A需要一直在等待，直到B返回结果，期间A不可以做任何事情。</span><br><span class="line">同步非阻塞：当A调用B的时候，A需要等待B返回结果，但是期间可以去做别的事情，但是A需要时不时的确认B是否返回结果。</span><br><span class="line">异步阻塞：当A调用B的时候，B立即返回结果，A不需要等待，到结果返回时B会通知A，但是期间A不可以做别的事情。</span><br><span class="line">异步非阻塞：当A调用B的时候，B立即返回结果，A不需要等待，到结果返回时B会通知A，而且期间A还可以做别的事情。</span><br></pre></td></tr></table></figure>

<h3 id="服务器内存使用情况：free"><a href="#服务器内存使用情况：free" class="headerlink" title="服务器内存使用情况：free"></a>服务器内存使用情况：free</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">free -m --查看内存，不带单位</span><br><span class="line">free -h --查看内存使用情况，带单位，显示查看结果</span><br><span class="line">total：总计物理内存的大小</span><br><span class="line">used：已使用内存</span><br><span class="line">free：可用内存</span><br><span class="line">Shared：多个进程共享的内存总额</span><br><span class="line">Buffers/cached：磁盘缓存的大小  缓存是可以清除的</span><br></pre></td></tr></table></figure>

<h3 id="缓存清除"><a href="#缓存清除" class="headerlink" title="缓存清除"></a>缓存清除</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">如果cached过大接近total数就需要清除缓存了，缓存清除命令：</span><br><span class="line">echo 1 &gt; /proc/sys/vm/drop_caches --释放网页缓存</span><br><span class="line">echo 2 &gt; /proc/sys/vm/drop_caches --释放目录项和索引</span><br><span class="line">echo 3 &gt; /proc/sys/vm/drop_caches --释放网页缓存，目录项和索引</span><br></pre></td></tr></table></figure>

<h3 id="本地和远程服务器文件传输包"><a href="#本地和远程服务器文件传输包" class="headerlink" title="本地和远程服务器文件传输包"></a>本地和远程服务器文件传输包</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt-get install lrzsz</span><br><span class="line">rz:上传</span><br><span class="line">sz:下载</span><br></pre></td></tr></table></figure>

<h3 id="统计ssh在线人数"><a href="#统计ssh在线人数" class="headerlink" title="统计ssh在线人数"></a>统计ssh在线人数</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">w	#显示目前登入系统的用户信息。</span><br><span class="line">w | grep pts |wc -l</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="查看系统中所有的用户"><a href="#查看系统中所有的用户" class="headerlink" title="查看系统中所有的用户"></a>查看系统中所有的用户</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep bash /etc/passwd</span><br></pre></td></tr></table></figure>

<h3 id="查看所有用户密码"><a href="#查看所有用户密码" class="headerlink" title="查看所有用户密码"></a>查看所有用户密码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/passwd</span><br><span class="line">#结果</span><br><span class="line">khadas:x:1000:1000::/home/khadas:/bin/bash</span><br><span class="line">从左到右依次为（用冒号分隔）：</span><br><span class="line">	登录用户名</span><br><span class="line">	经过加密的口令或者口令占位符</span><br><span class="line">	UID（用户ID）</span><br><span class="line">	默认的GID（组ID）</span><br><span class="line">	GECOS信息：全名，办公室，手机号，座机号，其它（上结果无该信息）</span><br><span class="line">	主目录</span><br><span class="line">	登录的shell</span><br></pre></td></tr></table></figure>

<h3 id="x2F-bin-x2F-bash-posix与-x2F-bin-x2F-sh区别"><a href="#x2F-bin-x2F-bash-posix与-x2F-bin-x2F-sh区别" class="headerlink" title="&#x2F;bin&#x2F;bash-posix与&#x2F;bin&#x2F;sh区别"></a>&#x2F;bin&#x2F;bash-posix与&#x2F;bin&#x2F;sh区别</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1./bin/bash–posix与/bin/sh的执行结果相同。总结起来，sh跟bash的区别，实际上是bash有没开启posix模式的区别。遵守posix规范，可能包括，”当某行代码出错时，不继续往下执行。“</span><br><span class="line">2.每个脚本开头都使用&quot;#!&quot;，它是指定一个文件类型的特殊标记，代表该文件就是一个可执行的脚本。在#!之后，接一个路径名，这个路径名指定了一个解释脚本命令的程序，这个程序可以是shell，程序语言或者任意一个通用程序。</span><br></pre></td></tr></table></figure>

<h3 id="分组操作"><a href="#分组操作" class="headerlink" title="分组操作"></a>分组操作</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="language-bash">添加分组</span></span><br><span class="line">groupadd -g id 组名</span><br><span class="line">参数说明：</span><br><span class="line">-g：指定新建工作组的 id；</span><br><span class="line">-r：创建系统工作组，系统工作组的组ID小于 500；</span><br><span class="line">-K：覆盖配置文件 &quot;/ect/login.defs&quot;；</span><br><span class="line">-o：允许添加组 ID 号不唯一的工作组。</span><br><span class="line">-f,--force: 如果指定的组已经存在，此选项将失明了仅以成功状态退出。当与 -g 一起使用，并且指定的GID_MIN已经存在时，选择另一个唯一的GID（即-g关闭）。</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">查看分组</span></span><br><span class="line">cat /etc/group</span><br><span class="line"><span class="meta">#</span><span class="language-bash">删除分组:</span></span><br><span class="line">sudo groupdel 组名</span><br></pre></td></tr></table></figure>

<h3 id="递归创建目录"><a href="#递归创建目录" class="headerlink" title="递归创建目录"></a>递归创建目录</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p</span><br><span class="line"><span class="meta">#</span><span class="language-bash">递归创建目录，即使上级目录不存在，会按目录层级自动创建目录。一次可以创建多级文件夹</span></span><br></pre></td></tr></table></figure>

<h3 id="添加用户到用户组"><a href="#添加用户到用户组" class="headerlink" title="添加用户到用户组"></a>添加用户到用户组</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd [-mMnr][-c &lt;备注&gt;][-d &lt;登入目录&gt;][-e &lt;有效期限&gt;][-f &lt;缓冲天数&gt;][-g &lt;群组&gt;][-G &lt;群组&gt;][-s &lt;shell&gt;][-u &lt;uid&gt;][用户帐号]</span><br></pre></td></tr></table></figure>

<h3 id="文本文件的语言–AWK"><a href="#文本文件的语言–AWK" class="headerlink" title="文本文件的语言–AWK"></a>文本文件的语言–AWK</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">awk [选项参数] &#x27;script&#x27; var=value file(s)</span><br><span class="line"><span class="meta">#</span><span class="language-bash">或</span></span><br><span class="line">awk [选项参数] -f scriptfile var=value file(s)</span><br><span class="line">选项参数:</span><br><span class="line">-F fs or --field-separator fs</span><br><span class="line">指定输入文件折分隔符，fs是一个字符串或者是一个正则表达式，如-F:。(默认空格分割，取值$1，$2依次取出第一和第二个分割后的元素)</span><br><span class="line">-v var=value or --asign var=value</span><br><span class="line">赋值一个用户定义变量。</span><br><span class="line">-f scripfile or --file scriptfile</span><br><span class="line">从脚本文件中读取awk命令。</span><br><span class="line">-mf nnn and -mr nnn</span><br><span class="line">对nnn值设置内在限制，-mf选项限制分配给nnn的最大块数目；-mr选项限制记录的最大数目。这两个功能是Bell实验室版awk的扩展功能，在标准awk中不适用。</span><br><span class="line">-W compact or --compat, -W traditional or --traditional</span><br><span class="line">在兼容模式下运行awk。所以gawk的行为和标准的awk完全一样，所有的awk扩展都被忽略。</span><br><span class="line">-W copyleft or --copyleft, -W copyright or --copyright</span><br><span class="line">打印简短的版权信息。</span><br><span class="line">-W help or --help, -W usage or --usage</span><br><span class="line">打印全部awk选项和每个选项的简短说明。</span><br><span class="line">-W lint or --lint</span><br><span class="line">打印不能向传统unix平台移植的结构的警告。</span><br><span class="line">-W lint-old or --lint-old</span><br><span class="line">打印关于不能向传统unix平台移植的结构的警告。</span><br><span class="line">-W posix</span><br><span class="line">打开兼容模式。但有以下限制，不识别：/x、函数关键字、func、换码序列以及当fs是一个空格时，将新行作为一个域分隔符；操作符**和**=不能代替^和^=；fflush无效。</span><br><span class="line">-W re-interval or --re-inerval</span><br><span class="line">允许间隔正则表达式的使用，参考(grep中的Posix字符类)，如括号表达式[[:alpha:]]。</span><br><span class="line">-W source program-text or --source program-text</span><br><span class="line">使用program-text作为源代码，可与-f命令混用。</span><br><span class="line">-W version or --version</span><br><span class="line">打印bug报告信息的版本。</span><br></pre></td></tr></table></figure>

<h3 id="xargs-工具"><a href="#xargs-工具" class="headerlink" title="xargs 工具"></a>xargs 工具</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="language-bash">xargs（英文全拼： eXtended ARGuments）是给命令传递参数的一个过滤器，也是组合多个命令的一个工具。</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">xargs 可以将管道或标准输入（stdin）数据转换成命令行参数，也能够从文件的输出中读取数据。</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">xargs 也可以将单行或多行文本输入转换为其他格式，例如多行变单行，单行变多行。</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">xargs 默认的命令是 <span class="built_in">echo</span>，这意味着通过管道传递给 xargs 的输入将会包含换行和空白，不过通过 <span class="comment">#xargs 的处理，换行和空白将被空格取代。</span></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">xargs 是一个强有力的命令，它能够捕获一个命令的输出，然后传递给另外一个命令。</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">之所以能用到这个命令，关键是由于很多命令不支持|管道来传递参数，而日常工作中有有这个必要，所以就有了 xargs 命令，例如：</span></span><br><span class="line">find /sbin -perm +700 |ls -l       #这个命令是错误的</span><br><span class="line">find /sbin -perm +700 |xargs ls -l   #这样才是正确的</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">命令格式</span></span><br><span class="line">somecommand |xargs -item  command</span><br><span class="line">-a file 从文件中读入作为 stdin</span><br><span class="line">-e flag ，注意有的时候可能会是-E，flag必须是一个以空格分隔的标志，当xargs分析到含有flag这个标志的时候就停止。</span><br><span class="line">-p 当每次执行一个argument的时候询问一次用户。</span><br><span class="line">-n num 后面加次数，表示命令在执行的时候一次用的argument的个数，默认是用所有的。</span><br><span class="line">-t 表示先打印命令，然后再执行。</span><br><span class="line">-i 或者是-I，这得看linux支持了，将xargs的每项名称，一般是一行一行赋值给 &#123;&#125;，可以用 &#123;&#125; 代替。</span><br><span class="line">-r no-run-if-empty 当xargs的输入为空的时候则停止xargs，不用再去执行了。</span><br><span class="line">-s num 命令行的最大字符数，指的是 xargs 后面那个命令的最大命令行字符数。</span><br><span class="line">-L num 从标准输入一次读取 num 行送给 command 命令。</span><br><span class="line">-l 同 -L。</span><br><span class="line">-d delim 分隔符，默认的xargs分隔符是回车，argument的分隔符是空格，这里修改的是xargs的分隔符。</span><br><span class="line">-x exit的意思，主要是配合-s使用。。</span><br><span class="line">-P 修改最大的进程数，默认是1，为0时候为as many as it can ，这个例子我没有想到，应该平时都用不到的吧。</span><br></pre></td></tr></table></figure>

<h3 id="修改用户信息"><a href="#修改用户信息" class="headerlink" title="修改用户信息"></a>修改用户信息</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="language-bash">usermod 命令就是用来调整使用 useradd 命令添加的用户信息</span></span><br><span class="line">usermod [选项] 用户名</span><br><span class="line">选项：</span><br><span class="line">-c 用户说明：修改用户的说明信息，即修改 /etc/passwd 文件目标用户信息的第 5 个字段；</span><br><span class="line">-d 主目录：修改用户的主目录，即修改 /etc/passwd 文件中目标用户信息的第 6 个字段，需要注意的是，主目录必须写绝对路径；</span><br><span class="line">-e 日期：修改用户的失效曰期，格式为 &quot;YYYY-MM-DD&quot;，即修改 /etc/shadow 文件目标用户密码信息的第 8 个字段；</span><br><span class="line">-g 组名：修改用户的初始组，即修改 /etc/passwd 文件目标用户信息的第 4 个字段（GID）；</span><br><span class="line">-u UID：修改用户的UID，即修改 /etc/passwd 文件目标用户信息的第 3 个字段（UID）；</span><br><span class="line">-G 组名：修改用户的附加组，其实就是把用户加入其他用户组，即修改 /etc/group 文件；</span><br><span class="line">-l 用户名：修改用户名称；</span><br><span class="line">-L：临时锁定用户（Lock）；</span><br><span class="line">-U：解锁用户（Unlock），和 -L 对应；</span><br><span class="line">-s shell：修改用户的登录 Shell，默认是 /bin/bash。</span><br></pre></td></tr></table></figure>

<h3 id="列出系统的所有sudo用户"><a href="#列出系统的所有sudo用户" class="headerlink" title="列出系统的所有sudo用户"></a>列出系统的所有sudo用户</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getent group sudo </span><br></pre></td></tr></table></figure>

<h3 id="查看linux用户密码（需要linux密码）"><a href="#查看linux用户密码（需要linux密码）" class="headerlink" title="查看linux用户密码（需要linux密码）"></a>查看linux用户密码（需要linux密码）</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="language-bash">用户名在/etc/passwd这个文件中；</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">密码在/etc/shadow中</span></span><br><span class="line">cat /etc/passwd</span><br><span class="line"><span class="meta">#</span><span class="language-bash">结果</span></span><br><span class="line">gizwits:x:2021:2021:Gizwits Manager:/home/gizwits:/bin/bash</span><br><span class="line"><span class="meta">#</span><span class="language-bash">格式解释</span></span><br><span class="line"></span><br><span class="line">&#123;用户名&#125;：&#123;加密密码&#125;：&#123;口令最后修改时间距原点(1970-1-1)的天数&#125;：&#123;口令最小修改间隔(防止修改口令，如果时限未到，将恢复至旧口令)：&#123;口令最大修改间隔&#125;：&#123;口令失效前的警告天数&#125;：&#123;账户不活动天数&#125;：&#123;账号失效天数&#125;：&#123;保留&#125;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">为了安全，系统将明文密码进行了加密。查看加密方式</span></span><br><span class="line">authconfig --test | grep hashing</span><br></pre></td></tr></table></figure>

<h3 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">userdel -r 用户名</span><br><span class="line"><span class="meta">#</span><span class="language-bash">用户相关文件也会删除。</span></span><br></pre></td></tr></table></figure>

<h3 id="用户得到权限"><a href="#用户得到权限" class="headerlink" title="用户得到权限"></a>用户得到权限</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo -i 完全取得root的权限和root的工作环境。(只需要验证当前用户账号密码；进程的实际用户ID和有效用户ID都变成了root，主目录也切换为root的主目录)</span><br><span class="line">su root 仅仅取得root权限，工作环境不变，（需要验证root密码；su root和su一样:表示与root建立一个链接，通过root执行命令，其实就是进程的有效用户ID变成了root）</span><br></pre></td></tr></table></figure>

<h3 id="结果黑洞"><a href="#结果黑洞" class="headerlink" title="结果黑洞"></a>结果黑洞</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/dev/null</span><br><span class="line"><span class="meta">#</span><span class="language-bash">脚本没有必要打印或者打印信息过多，减小性能和内存消耗，所以把信息丢到结果黑洞里面</span></span><br></pre></td></tr></table></figure>

<h3 id="查看系统版本"><a href="#查看系统版本" class="headerlink" title="查看系统版本"></a>查看系统版本</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">lsb_release -a</span><br><span class="line">uname -a</span><br><span class="line">cat /proc/version</span><br><span class="line">uname -r</span><br></pre></td></tr></table></figure>

<h3 id="容器内部下载包"><a href="#容器内部下载包" class="headerlink" title="容器内部下载包"></a>容器内部下载包</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apk install 包名</span><br></pre></td></tr></table></figure>

<h3 id="传输超大文件"><a href="#传输超大文件" class="headerlink" title="传输超大文件"></a>传输超大文件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">推送(https://www.cnblogs.com/coolops/p/12843436.html)</span></span><br><span class="line">rsync -auvzP -e &quot;ssh -p22&quot; mssh.tar.gz root@192.168.176.11:/data/</span><br><span class="line"><span class="meta"># </span><span class="language-bash">拉取</span></span><br><span class="line">rsync -auvzP -e &quot;ssh -p22&quot; root@192.168.176.11:/data/mssh.tar.gz .</span><br></pre></td></tr></table></figure>

<h3 id="压缩文件"><a href="#压缩文件" class="headerlink" title="压缩文件"></a>压缩文件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">压缩为*.gz</span></span><br><span class="line">tar -zcvf test.tar.gz test.txt</span><br><span class="line"><span class="meta"># </span><span class="language-bash">gz解压缩</span></span><br><span class="line">tar -zxvf /usr/local/test.tar.gz</span><br></pre></td></tr></table></figure>

<h3 id="更换ubuntu源"><a href="#更换ubuntu源" class="headerlink" title="更换ubuntu源"></a>更换ubuntu源</h3><ol>
<li>&#96;&#96;&#96;shell<ol>
<li>确定系统版本</li>
<li>找到源list</li>
<li>打开vi &#x2F;etc&#x2F;apt&#x2F;sources.list</li>
<li>apt update</li>
<li>apt upgrade<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### ubuntu20.04 图形界面开启与关闭</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="关闭图形界面"><a href="#关闭图形界面" class="headerlink" title="关闭图形界面"></a>关闭图形界面</h1>sudo systemctl set-default multi-user.target<h1 id="开启图形界面"><a href="#开启图形界面" class="headerlink" title="开启图形界面"></a>开启图形界面</h1>sudo systemctl set-default graphical.target<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### centos7命令行安装wmvare tools</span><br><span class="line"></span><br><span class="line">[Linux(CentOS 7)命令行模式安装VMware Tools 详解 - 阳光666 - 博客园 (cnblogs.com)](https://www.cnblogs.com/yblafxw/p/9272330.html)</span><br><span class="line"></span><br><span class="line">### grep查看文件内容</span><br><span class="line"></span><br><span class="line">```shell</span><br><span class="line">grep [options]</span><br><span class="line">[options]主要参数：</span><br><span class="line">－c：只输出匹配行的计数。</span><br><span class="line">－I：不区分大 小写(只适用于单字符)。</span><br><span class="line">－h：查询多文件时不显示文件名。</span><br><span class="line">－l：查询多文件时只输出包含匹配字符的文件名。</span><br><span class="line">－n：显示匹配行及 行号。</span><br><span class="line">－s：不显示不存在或无匹配文本的错误信息。</span><br><span class="line">－v：显示不包含匹配文本的所有行。</span><br><span class="line"></span><br><span class="line"># 查看有内容的文件夹下</span><br><span class="line">grep 内容 -nr 文件夹</span><br><span class="line"># 忽略大小写，文件夹查找内容</span><br><span class="line">grep -i cgroup -nr ./</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ol>
<h2 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h2><h3 id="Linux文件和目录的权限"><a href="#Linux文件和目录的权限" class="headerlink" title="Linux文件和目录的权限"></a><strong>Linux文件和目录的权限</strong></h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="language-bash">文件或目录的权限可以分为3种:</span></span><br><span class="line">r:4 读</span><br><span class="line">w:2 写</span><br><span class="line">x:1  执行(运行)</span><br><span class="line">-：对应数值0</span><br><span class="line">数字 4 、2 和 1表示读、写、执行权限</span><br><span class="line">rwx = 4 + 2 + 1 = 7 (可读写运行）</span><br><span class="line">rw = 4 + 2 = 6 （可读写不可运行）</span><br><span class="line">rx = 4 +1 = 5 （可读可运行不可写）</span><br><span class="line"><span class="meta">#</span><span class="language-bash">比如：最高权限777：（4+2+1）（4+2+1）（4+2+1）</span></span><br><span class="line">第一个7:表示当前文件的拥有者的权限,7=4+2+1 可读可写可执行权限</span><br><span class="line">第二个7:表示当前文件的所属组（同组用户）权限,7=4+2+1 可读可写可执行权限</span><br><span class="line">第三个7:表示当前文件的组外权限,7=4+2+1 可读可写可执行权限</span><br></pre></td></tr></table></figure>

<h3 id="查看文件权限"><a href="#查看文件权限" class="headerlink" title="查看文件权限"></a>查看文件权限</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ls -l </span><br><span class="line">ls ll </span><br><span class="line">ls -al</span><br><span class="line">结果分为7列</span><br><span class="line">    第一列：文件类型，1-代表普通文件 d-代表目录</span><br><span class="line">　　第二列：文件节点数（node）</span><br><span class="line">　　第三列：表示文件拥有者root用户</span><br><span class="line">　　第四列：表示文件所属组root用户组</span><br><span class="line">　　第五列：显示文件大小，默认是字节byte，可以通过命令 ls -lh 更人性化地查看文件大小</span><br><span class="line">　　第六列：文件最后修改时间</span><br><span class="line">　　第七咧：文件或目录的名称</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="设置文件权限"><a href="#设置文件权限" class="headerlink" title="设置文件权限"></a>设置文件权限</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="language-bash">格式：chomd 755 文件名</span></span><br><span class="line">chown  xww  test       \\将test文件的属主改为xww用户</span><br><span class="line">chown  xww.xww  test      \\将test文件的属主改为xww用户，属组改为xww组</span><br><span class="line">chown  -R  xww:xww test   \\将test及其下的所有目录和文件的属主改为xww用户，属组改为xww组。参数-R有递归作用</span><br></pre></td></tr></table></figure>

<h3 id="查看文件夹大小"><a href="#查看文件夹大小" class="headerlink" title="查看文件夹大小"></a>查看文件夹大小</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">du -h --max-depth=1 文件夹名</span><br></pre></td></tr></table></figure>

<h3 id="文件大小排序查看"><a href="#文件大小排序查看" class="headerlink" title="文件大小排序查看"></a>文件大小排序查看</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ls -Sl -hl	#降序</span><br><span class="line">ls -Slr -hl #升序</span><br></pre></td></tr></table></figure>

<h3 id="创建软连接"><a href="#创建软连接" class="headerlink" title="创建软连接"></a>创建软连接</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s   /tmp/aaa.sh /home/link    //在home下创建一个名为link的软链接，指向/tmp/aaa.sh</span><br></pre></td></tr></table></figure>

<h2 id="系统属性命令"><a href="#系统属性命令" class="headerlink" title="系统属性命令"></a>系统属性命令</h2><h3 id="查看系统cpu使用情况"><a href="#查看系统cpu使用情况" class="headerlink" title="查看系统cpu使用情况"></a>查看系统cpu使用情况</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">top	#查看当前cpu使用情况。</span><br><span class="line"><span class="meta">#</span><span class="language-bash">1 其中以<span class="built_in">id</span>结尾的就是当前系统的cpu空闲率</span></span><br><span class="line"><span class="meta">#</span><span class="language-bash">2 其中load average 三个数字代表1 5 15分钟前到现在的系统负载平均值</span></span><br></pre></td></tr></table></figure>

<h3 id="查看内核版本"><a href="#查看内核版本" class="headerlink" title="查看内核版本"></a>查看内核版本</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/version</span><br><span class="line">uname -a</span><br><span class="line">uname -r</span><br></pre></td></tr></table></figure>

<h3 id="查看linux版本信息"><a href="#查看linux版本信息" class="headerlink" title="查看linux版本信息"></a>查看linux版本信息</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lsb_release -a</span><br><span class="line">cat /etc/issue</span><br></pre></td></tr></table></figure>

<p>shell环境变量</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="language-bash">查看shell环境变量</span></span><br><span class="line">export</span><br><span class="line">echo $变量名</span><br><span class="line"><span class="meta">#</span><span class="language-bash">添加环境变量</span></span><br><span class="line">export 变量名=变量值</span><br><span class="line"><span class="meta">#</span><span class="language-bash">环境变量可以在其进程的子进程中继续有效，而自定义变量则无效</span></span><br></pre></td></tr></table></figure>

<p>查看硬盘内存大小</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">df -h</span><br><span class="line"><span class="meta"># </span><span class="language-bash">查看磁盘剩余空间信息</span></span><br><span class="line">df -hl</span><br></pre></td></tr></table></figure>

<p>关闭防火墙</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ubuntu</span><br><span class="line">ufw status</span><br><span class="line">ufw disable</span><br><span class="line">ufw enable</span><br></pre></td></tr></table></figure>



<h3 id="查看端口占用情况"><a href="#查看端口占用情况" class="headerlink" title="查看端口占用情况"></a>查看端口占用情况</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">lsof -i:端口号</span><br><span class="line">netstat -tunlp | grep 端口号</span><br><span class="line">netstat -ntlp   //查看当前所有tcp端口</span><br><span class="line">netstat -ntulp | grep 80   //查看所有80端口使用情况</span><br><span class="line">netstat -ntulp | grep 3306   //查看所有3306端口使用情况</span><br></pre></td></tr></table></figure>

<h3 id="杀死进程"><a href="#杀死进程" class="headerlink" title="杀死进程"></a>杀死进程</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kill -9 PID</span><br></pre></td></tr></table></figure>

<h3 id="查看全部进程"><a href="#查看全部进程" class="headerlink" title="查看全部进程"></a>查看全部进程</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> ps aux | less	# 显示所有运行中的进程：</span><br><span class="line"> pstree</span><br><span class="line"> top</span><br><span class="line"> ps -e			# 查看系统中的每个进程。</span><br><span class="line">ps -U root -u root -N		# 查看非root运行的进程</span><br><span class="line">ps -u vivek					# 查看用户vivek运行的进程</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>重启网卡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1、service network restart</span><br><span class="line">2、ifconfig eth0 down / ifconfig eth0 up</span><br><span class="line">3、ifdown eth0 / ifup eth0</span><br></pre></td></tr></table></figure>



<h2 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h2><h3 id="虚拟机外部访问"><a href="#虚拟机外部访问" class="headerlink" title="虚拟机外部访问"></a>虚拟机外部访问</h3><p>​    设置成桥接模式，外部网络可以访问。NAT模式只是共享主机IP,外部一般无法访问</p>
<h2 id="疑难杂症"><a href="#疑难杂症" class="headerlink" title="疑难杂症"></a>疑难杂症</h2><h3 id="系统盘变为只读文件的修复"><a href="#系统盘变为只读文件的修复" class="headerlink" title="系统盘变为只读文件的修复"></a>系统盘变为只读文件的修复</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">centos7</span></span><br><span class="line">df -Th</span><br><span class="line"><span class="meta"># </span><span class="language-bash">找到centos-root</span></span><br><span class="line"><span class="meta">	#</span><span class="language-bash">如：/dev/mapper/centos-root xfs 34G 1.3G 32G 4% /</span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">重新挂载</span></span><br><span class="line">mount -o rw,remount /dev/mapper/centos-root /</span><br></pre></td></tr></table></figure>

<h2 id="包下载地址"><a href="#包下载地址" class="headerlink" title="包下载地址"></a>包下载地址</h2><h3 id="ffmpeg"><a href="#ffmpeg" class="headerlink" title="ffmpeg:"></a>ffmpeg:</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://ffmpeg.org/releases/</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/02/16/linux/" data-id="ckzp65exv0001fcv1dssj3956" data-title="linux" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/02/16/docker/">docker</a>
          </li>
        
          <li>
            <a href="/2022/02/16/GIT/">GIT</a>
          </li>
        
          <li>
            <a href="/2022/02/16/linux/">linux</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>